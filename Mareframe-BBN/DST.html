<!DOCTYPE html>
<html lang="EN-US">
<head>
    <meta charset="utf-8" />
    <title>Mareframe Decision Support Tool</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="css/lib/bootstrap.min.css" rel="stylesheet" />
    <link href="css/body.css" rel="stylesheet" />
    <link href="css/footer.css" rel="stylesheet" />
    <link id="dialog_css" href="css/dialog.css" rel="stylesheet" />

    <link id="ui_css" href="jQueryUI/jquery-ui_original.css" rel="stylesheet" />
    <link href="css/DST.css" rel="stylesheet" />
</head>
<body>
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="https://code.createjs.com/createjs-2015.05.21.min.js"></script>
    <script src="https://www.google.com/jsapi"></script>
    <script>
        google.load("visualization", "1.0", { "packages": ["corechart", "table"] });
    </script>
    <script src="js/math.min.js" type="text/javascript"></script>
    <script src="ts/Model.js" type="text/javascript"></script>
    <script src="ts/MareframeGUI.js" type="text/javascript"></script>
    <script src="ts/FileIO.js" type="text/javascript"></script>
    <script src="ts/Element.js" type="text/javascript"></script>
    <script src="ts/Connection.js" type="text/javascript"></script>
    <script src="ts/Handler.js" type="text/javascript"></script>
    <script src="ts/Tools.js" type="text/javascript"></script>

    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="page-header">
                    <h1 id="model_header">
                        <a id="webpage"href="http://www.mareframe-fp7.org/">
                            <img id="logo" src="img/logo_mareframe.png">
                        </a>
                    </h1>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <a href="index.html"><img src="img/europe.jpg" class="img-thumbnail europe-map-back"></a>
                        <p id="model_description">This is the Mareframe BBN tool. You may doubleclick on each element below, to access the properties tables for that element.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 page-header europe-map-zoom">
                <img src="img/locations/west-coast-of-scotland.jpg" class="center-block img-responsive img-rounded">
            </div>
        </div>
    </div>
    <div id="debug">
        <p id="mX"></p>
        <p id="mY"></p>
        <p id="mAction"></p>
        <p id="mTarget"></p>
        <p id="mConnect"></p>
        <button id="debugButton"> Debug </button>
        <button id="debugConnect"> Connections </button>
    </div>
    <div class="ui-widget ui-dialog ui-corner-all ui-widget-content header-bar" style="position: static">
        <div class="ui-widget-header ui-corner-all ui-dialog-titlebar" id="modelHeader">Model</div>


        <div style="padding: 1em 1em 0.5em 1.4em; font-size: 0.7em">
            <label for="selctModel">Select a model</label>
            <select id="selectModel">
                <option value="resturant"selected="selected">Opening a Resturant</option>
                <option value="happiness" >Happiness</option>
            </select>

            <button class="advButton" id="newDcmt">New Document</button>
            <div class="LoadFileBtn advButton" id="lodDcmtDiv">
                <span class="advButton">Open Document</span>
                <input class="advButton upload" type="file" id="lodDcmt" />
            </div>

            <button class="advButton" id="savDcmt">Save Document</button>
            <button class="advButton" id="resetDcmt">Reset</button>
            <button class="advButton" id="newElmt">New Element</button>
            <button class="advButton" id="newChance">New Chance</button>
            <button class="advButton" id="newDec">New Decision</button>
            <button class="advButton" id="newValue">New Value</button>
            <button class="advButton" id="deleteElmt">Delete Element</button>
            <button class="advButton" id="selectAllElmt">Select All</button>
            <input class="advButton" type="checkbox" id="cnctTool">
            <label for="cnctTool" class="advButton">Connect Tool</label> 
            
            <div style="float:right">
                <input class="button" type="checkbox" id="fullscreen"> </input>
                <label for="fullscreen" class="button">Fullscreen</label>
                <input class="button" type="checkbox" id="editorMode">
                <label for="editorMode" class="button">Editor Mode</label>
                <input class="button" type="checkbox" id="autoUpdate" checked>
                <label for="autoUpdate" class="button" >Automatically update</label>
                <button class="button" id="updateMdl">Update</button>
            </div>
        </div>

    </div>

    <div id="autoUpdateStatus" class="modeStatus"></div>
    <div id="modeStatus" class="modeStatus"></div>
    
    <div id="MCAContainer" style="text-align:center">

        <!--MCA Tool canvas-->
        <canvas id="MCATool" width="1000" height="600" style="display:inline-block"></canvas>


        <!--Data Table-->
        <div id="MCADataTable" class="table-editable" style="display:inline-block ; vertical-align:top">
            <table id="editableDataTable" class="table" style="border: 2px solid #ffffff;border-collapse:collapse;">
                <tr id="table_header">
                    <th style="border: 1px solid black">UnDef</th>
                    <th style="border: 1px solid black">UnDef</th>
                </tr>
                <tr>
                    <td contenteditable="true">undefined</td>
                    <td contenteditable="true">undefined</td>
                </tr>
                <tr>
                    <td contenteditable="true">undefined</td>
                    <td contenteditable="true">undefined</td>
                </tr>
            </table>
        </div>

        <div id="finalScore_div" style="display:inline-block"></div>
    </div>
    <div id="saveFile_div"><a id="downloadLink"></a></div>


    <!--Popup Dialog-->
    <div id="detailsDialog">
        <div class="info_div" style="width: 30%; overflow: hidden;">
            <div class="info_div" style="width: 80px; float: left;"> Name: </div>
            <div class="info_div" id="info_name" style="margin-left: 50px;">  </div>
            <div class="info_div" id="info_type_tag"style="width: 80px; float: left;"> Type: </div>
            <div class="info_div" id="info_type" style="margin-left: 50px;">  </div>
        </div>
        <div id="elementType">
            <form >
                <fieldset>
                    <label for = "MCAelmtType" >Type of Element</label>
                    <select name="MCAelmtType" id="MCAelmtType">
                        <option id="optionAttribute" value="0">Attribute</option>
                        <option id="optionObjective" value="1">Objective</option>
                        <option id="optionAlternative" value="2">Alternative</option>
                    </select>

                    <label for="MCAWeightingMethod">Type of Weighting Method</label>
                    <select name="MCAWeightingMethod" id="MCAWeightingMethod">
                        <option id="optionSwingDirect" value="1">Swing / Direct</option>
                        <option id="optionValueFunction" value="2">Value Function</option>
                    </select>
                </fieldset>
            </form>
        </div>
        <div id="weightingMethodSelector"></div>
        <div id="valueFn_div">
            <canvas id="valueFn_canvas" width="100" height="100"></canvas>
            <button class="button" id="valueFn_Linear">Linearize</button>
            <button class="button" id="valueFn_Flip">Flip Direction</button>
        </div>
        <div id="sliders_div"></div>
        <div id="datatable_div"></div>
        <div id="description_div"></div>
        <div id="chart_div"></div>
        <input class="dialogButton" type="checkbox" id="showDescription" checked>
        <label for="showDescription" >Hide Description</label>
        <div class="editable ">
            <div id="defTable_div"></div>
        </div>
        <button class="dialogButton" id="addDataRow">Add Data Row</button>
        <button class="dialogButton" id="submit">Submit changes</button>
        <button class="dialogButton" id="values">Show values</button>
        <div id="valuesTable_div"></div>
        <div id="userDescription_div"> </div>
    </div>
    
    <script>
        function cnctPress() {
            $this.hide();
        };

        $("input[type=checkbox]").button();
        $("debugButton").button({ icons: { primary: "ui-icon-document" } });
        $("debugConnect").button({ icons: { primary: "ui-icon-document" } });
        
        $("#valueFn_Linear").button();
        $("#valueFn_Flip").button();
        $("#newDcmt").button({ icons: { primary: "ui-icon-document" } });
        $("#lodDcmtDiv").button({ icons: { primary: "ui-icon-folder-open" } });
        $("#savDcmt").button({ icons: { primary: "ui-icon-disk" } });
        $("#newElmt").button({ icons: { primary: "ui-icon-plus" } });
        $("#newDec").button({ icons: { primary: "ui-icon-plus" } });
        $("#newChance").button({ icons: { primary: "ui-icon-plus" } });
        $("#newValue").button({ icons: { primary: "ui-icon-plus" } });
        $("#deleteElmt").button({ icons: { primary: "ui-icon-trash" } });
        $("#cnctTool").button({ icons: { primary: "ui-icon-link" } }, cnctPress);
        $("#fullscreen").button({ icons: { primary: "ui-icon-zoomin" } });
        $("#editorMode").button({ icons: { primary: "ui-icon-link" } });
        $("#autoUpdate").button({ icons: { primary: "ui-icon-refresh" } });
        $("#updateMdl").button({ icons: { primary: "ui-icon-refresh" } });
        $("#resetDcmt").button({ icons: { primary: "ui-icon-arrowreturnthick-1-w" } })
        $("#selectAllElmt").button({ icons: { primary: "ui-icon-star" } });
        $("#detailsDialog").dialog({
            autoOpen: false,
            resizable: true,
            height: 600,
            width: 800,
            show: {
                effect: "scale",
                duration: 400
            },
            hide: {
                effect: "scale",
                duration: 400
            },
            
            buttons: {
                Close: function () {
                    $("#valuesTable_div").hide();
                    $(this).dialog("close");
                    $("#weightingMethodSelector").hide();
                    $("#valueFn_div").hide();
                    $("#sliders_div").hide();
                    $("#datatable_div").hide();
                    $("#description_div").hide();
                    $("#chart_div").hide();
                },
            }
        });

        $("#weightingMethodSelector").hide();
        $("#valueFn_div").hide();
        $("#sliders_div").hide();
        $("#datatable_div").hide();
        $("#description_div").hide();
        $("#chart_div").hide();
        $("#valuesTable_div").hide();
        $("#saveFile_div").hide();
        $(document).ready(function () {
            var MareFrame = MareFrame || {};
            MareFrame.DST = MareFrame.DST || {};
            new Mareframe.DST.Handler();
        });

    </script>
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-2 col-sm-2 col-md-2">
                    <img src="img/logo_eu.png" class="center-block img-responsive">
                </div>
                <div class="col-xs-10 col-sm-10 col-md-6">
                    <p class="text-muted">This project has receive funding from the European Union's Seventh Framework Programme for research, technological development and demonstration under grant agreement no. 613571.</p>
                </div>
            </div>
        </div>
    </footer>

</body>
</html>